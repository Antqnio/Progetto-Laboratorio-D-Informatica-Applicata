<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gesture Recognizer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script  src="{{ url_for('static', filename='js/script.js') }}" defer></script></head>
<body>
    <h1>Bind Gestures to Commands</h1>
    <div class="main-layout">
        <div class="left-panel">

            <form method="POST" id="configForm">
                <div class="config-section">
                    <input type="text" name="config_name_text" placeholder="Configuration Name" value="{{ selected_config }}">
                    <select id="config_name_select" name="config_name_select">
                        <option value="">-- Select Configuration --</option>
                        {% for cfg in configs %}
                        <option value="{{ cfg }}" {% if selected_config == cfg %}selected{% endif %}>{{ cfg }}</option>
                        {% endfor %}
                    </select>
                </div>

                {% for gesture in gestures %}
                <div class="gesture-row">
                    <label class="gesture-label" for="{{ gesture }}">
                        <span class="gesture-icon">
                            {% if gesture == "Thumb_Up" %}üëç
                            {% elif gesture == "Thumb_Down" %}üëé
                            {% elif gesture == "Open_Palm" %}üñêÔ∏è
                            {% elif gesture == "Closed_Fist" %}‚úä
                            {% elif gesture == "Victory" %}‚úåÔ∏è
                            {% elif gesture == "ILoveYou" %}ü§ü
                            {% elif gesture == "Pointing_Up" %}üëÜ
                            {% else %}‚ùì
                            {% endif %}
                        </span>
                        {{ gesture.replace('_', ' ').title() }}
                    </label>
                    <select id="{{ gesture }}" name="{{ gesture }}">
                        <option value="-- No Command --">-- No Command --</option>
                        {% for command in commands %}
                        <option value="{{ command }}" {% if mappings.get(gesture, '') == command %}selected{% endif %}>{{ command }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endfor %}

                <div class="buttons">
                    <button id="apply-btn" type="submit" name="action" value="apply">Apply</button>
                    <button id="save-btn" type="submit" name="action" value="save">Save</button>
                </div>
            </form>
            <hr>

            <h2>Gesture Recognizer</h2>
            <p id="recognition-status" style="text-align: center; color: {{ 'green' if active else 'red' }};">
                {% if active %}üü¢ Active{% else %}üî¥ Inactive{% endif %}
            </p>
            <div style="text-align: center;">
                {% if active %}
                    <button id="stop-recognition-btn" type="button">Stop Recognition</button>
                    <button id="start-recognition-btn" type="button" style="display: none;">Start Recognition</button>
                {% else %}
                    <button id="stop-recognition-btn" type="button" style="display: none;">Stop Recognition</button>
                    <button id="start-recognition-btn" type="button">Start Recognition</button>
                {% endif %}
            </div>
        </div>    
        <div class="right-panel">
            <h2>Webcam Live</h2>
            <div class="webcam-container">
                <img id="webcam-frame" src="{{ url_for('video_feed') }}" width="640" height="480">
            </div>
            <p id="message"></p>
        </div>
    </div>
</body>
</html>